<!DOCTYPE html>
<html lang="ko">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-93TFLCBY3F"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-93TFLCBY3F');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9891583086388017" crossorigin="anonymous"></script>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>í…ìŠ¤íŠ¸ ì•„íŠ¸ ìƒì„±ê¸° - textartkorea.com</title>

<!-- favicon -->
<link rel="icon" type="image/x-icon" href="/favicon.ico">

<!-- Open Graph -->
<meta name="description" content="ì´ë¯¸ì§€ë¥¼ í…ìŠ¤íŠ¸ ì•„íŠ¸ë¡œ ë§Œë“¤ì–´ë³´ì„¸ìš”">
<meta property="og:type" content="website">
<meta property="og:title" content="í…ìŠ¤íŠ¸ ì•„íŠ¸ ìƒì„±ê¸° - textartkorea.com">
<meta property="og:description" content="ì´ë¯¸ì§€ë¥¼ í…ìŠ¤íŠ¸ ì•„íŠ¸ë¡œ ë§Œë“¤ì–´ë³´ì„¸ìš”">
<meta property="og:site_name" content="textartkorea.com">
<meta property="og:image" content="https://textartkorea.com/preview.jpg">
<meta property="og:url" content="https://textartkorea.com">

<style>
  :root{
    --bg:#0b0f14; --panel:#111823; --text:#e5eef7; --muted:#94a3b8; --accent:#4f9cf9; --border:#1e293b
  }
  *{box-sizing:border-box}
  body{
    margin:0; background:var(--bg); color:var(--text);
    font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, monospace
  }
  .wrap{max-width:940px;margin:0 auto;padding:16px}
  header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;gap:8px}
  .title{font-weight:800;font-size:18px}
  .sharebar{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
  .panel{background:var(--panel);border:1px solid var(--border);border-radius:14px;padding:14px}
  .grid{display:grid;gap:12px}
  @media(min-width:960px){.grid{grid-template-columns:360px 1fr}}

  /* ì—…ë¡œë“œ ì˜ì—­ */
  .drop{
    border:2px dashed #334155;border-radius:12px;padding:18px;text-align:center;
    background:#0f172a55; cursor:pointer; user-select:none
  }
  .drop:hover{border-color:var(--accent)}
  .drop strong.underline{ text-decoration: underline; }

  .hint{color:var(--muted);font-size:12px}
  .notice{margin-top:10px;padding:10px;border:1px dashed #2b3b55;border-radius:10px;background:#0f172a88}

  /* ì»¨íŠ¸ë¡¤ - í•œ ì¤„ì— í•˜ë‚˜ì”© */
  .control{
    display:flex; flex-direction:column; gap:8px;
    margin:12px 0; padding:10px; border:1px solid var(--border); border-radius:10px; background:#0f172a66
  }
  .control label{font-size:12px;color:var(--muted)}
  .control input[type="range"], .control select, .control input[type="color"], .control input[type="text"]{width:100%}

  .btns{display:flex;flex-wrap:wrap;gap:8px;margin-top:12px}
  button{
    background:#1e293b;color:#dbeafe;border:1px solid #2b3b55;
    padding:11px 14px;border-radius:10px;font-weight:700;cursor:pointer
  }
  button.primary{background:linear-gradient(180deg,#3b82f6,#2563eb);color:#fff}
  button:disabled{opacity:.55;cursor:not-allowed}
  .iconbtn{display:inline-flex;align-items:center;gap:6px}

  pre#ascii{
    margin:0; white-space:pre; overflow:auto; background:#000; color:#fff;
    padding:12px; border-radius:12px; line-height:1em; min-height:200px
  }

  /* âœ… ë©”ì‹œì§€ë¥¼ ë§ˆì§€ë§‰ ì¤„ 'ì•„ë˜' ìš°ì¸¡ ì •ë ¬ë¡œ í‘œì‹œ */
  .msg-below{
    margin-top:6px;
    text-align:right;
    font-weight:700;
    color:#fff;
    white-space:pre;
  }

  /* ëª¨ë°”ì¼ ì—¬ë°± ì¡°ê¸ˆ ë” */
  @media(max-width:480px){
    .control{margin:10px 0; padding:10px}
    .btns{gap:10px}
  }
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div class="title">ğŸ”¤ í…ìŠ¤íŠ¸ ì•„íŠ¸ ìƒì„±ê¸°</div>
    <div class="sharebar">
      <button id="shareSite" class="iconbtn">ğŸ“¤ ì¹œêµ¬ì—ê²Œ ê³µìœ </button>
    </div>
  </header>

<a href="https://iryan.kr/t7372qwd34" target="_blank" rel="noopener noreferrer">
  <img
    src="https://img.tenping.kr/Content/Upload/Content/2019062812440001_Con_20220105155617_6.png?RS=640x200"
    alt="í”„ë¡œëª¨ì…˜ ë°°ë„ˆ"
    style="max-width:100%; height:auto; display:block; border:0; margin:0 auto;"
    loading="lazy"
    decoding="async"
  />
</a>


  <div class="grid">
    <!-- ì¢Œì¸¡: ì»¨íŠ¸ë¡¤ -->
    <div class="panel">
      <!-- ìˆ¨ê¹€ íŒŒì¼ ì…ë ¥ -->
      <input id="file" type="file" accept="image/*" style="display:none">

      <!-- ì—…ë¡œë“œ ì˜ì—­ (ë”ë¸” ì„ íƒ ë°©ì§€: label ì œê±°, div í´ë¦­/í‚¤ë³´ë“œë¡œë§Œ íŠ¸ë¦¬ê±°) -->
      <div class="drop" id="drop" role="button" tabindex="0" aria-label="ì´ë¯¸ì§€ë¥¼ ë“œë¡­í•˜ê±°ë‚˜ ì—¬ê¸°ë¥¼ íƒ­í•˜ì—¬ ì—…ë¡œë“œ">
        <div><strong>ì´ë¯¸ì§€ ë“œë¡­</strong>í•˜ê±°ë‚˜ <strong class="underline">ì—¬ê¸°ë¥¼ íƒ­í•˜ì—¬ ì—…ë¡œë“œ</strong></div>
        <div class="hint">í´ë¦½ë³´ë“œì—ì„œ ë¶™ì—¬ë„£ê¸°ë„ ê°€ëŠ¥</div>
      </div>

      <div class="notice">ğŸ’¡ <strong>ì´ë¯¸ì§€ë¡œ ì €ì¥í•´ì•¼ ì˜ˆì˜ê²Œ ë³´ì—¬ìš”.</strong> ì¹´í†¡ì€ í°íŠ¸ê°€ ë‹¬ë¼ ì¤„ë§ì¶¤ì´ ê¹¨ì§ˆ ìˆ˜ ìˆì–´ìš”. ëª¨ë°”ì¼ì—ì„  50ì—´ ì´í•˜ ê¶Œì¥.</div>

      <!-- ì»¨íŠ¸ë¡¤: ê° í•­ëª© í•œ ì¤„ -->
      <div class="control">
        <label>ì¶œë ¥ í­: <span id="wVal">50</span>ì—´</label>
        <input id="width" type="range" min="30" max="300" value="50">
      </div>

      <div class="control">
        <label>í°íŠ¸ í¬ê¸°: <span id="fsVal">12</span>px</label>
        <input id="fontsize" type="range" min="8" max="20" value="12">
      </div>

      <div class="control">
        <label for="mode">ëª¨ë“œ</label>
        <select id="mode">
          <option value="mono" selected>í‘ë°±</option>
          <option value="color">ì»¬ëŸ¬</option>
        </select>
      </div>

      <div class="control">
        <label for="fontColor">í°íŠ¸ ìƒ‰ìƒ(í‘ë°±)</label>
        <input id="fontColor" type="color" value="#ffffff">
      </div>

      <div class="control">
        <label for="bgColor">ë°°ê²½ ìƒ‰ìƒ</label>
        <input id="bgColor" type="color" value="#000000">
      </div>

      <!-- ğŸ”¹ ì‚¬ìš©ì ë©”ì‹œì§€: ìµœëŒ€ 10ê¸€ì, ìš°ì¸¡ í•˜ë‹¨ ì¶œë ¥ -->
      <div class="control">
        <label for="customMsg">ë©”ì‹œì§€ (ìµœëŒ€ 10ê¸€ìê¹Œì§€ ì…ë ¥ ê°€ëŠ¥. ìš°ì¸¡ í•˜ë‹¨ ì¶œë ¥)</label>
        <input id="customMsg" type="text" maxlength="10" placeholder="ë©”ì‹œì§€ ì…ë ¥">
      </div>

      <div class="btns">
        <button id="render" class="primary" disabled>ë§Œë“¤ê¸°</button>
        <button id="copyBtn" class="iconbtn" disabled>ğŸ“‹ ë³µì‚¬</button>
        <button id="shareImage" disabled>ì´ë¯¸ì§€ ê³µìœ </button>
        <button id="savePng" disabled>ì´ë¯¸ì§€ ì €ì¥</button>
        <button id="clear">ì´ˆê¸°í™”</button>
      </div>
    </div>

    <!-- ìš°ì¸¡: ë¯¸ë¦¬ë³´ê¸°/ì¶œë ¥ -->
    <div class="panel">
      <div id="preview" style="margin-bottom:8px"></div>
      <pre id="ascii"></pre>
      <!-- âœ… ë©”ì‹œì§€ë¥¼ ASCII ì•„ë˜, ìš°ì¸¡ ì •ë ¬ë¡œ ë³„ë„ í‘œì‹œ -->
      <div id="msgBelow" class="msg-below"></div>
    </div>
  </div>
</div>

<!-- ë‚´ë¶€ ì²˜ë¦¬ìš© ìº”ë²„ìŠ¤ -->
<canvas id="canvas" style="display:none"></canvas>

<script>
// ===== ìœ í‹¸ & ë³´ì • =====
function clamp(v,min,max){ return Math.max(min, Math.min(max, v)); }
function hexToRgb(hex){
  const m = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
  if(!m) return {r:255,g:255,b:255};
  return { r: parseInt(m[1],16), g: parseInt(m[2],16), b: parseInt(m[3],16) };
}
function rgbToHex(r,g,b){
  const h = n => ('0'+clamp(n|0,0,255).toString(16)).slice(-2);
  return `#${h(r)}${h(g)}${h(b)}`;
}
// ì»¬ëŸ¬ ì €ì¥ ì‹œ ì‚´ì§ ë” ë°ê²Œ (sRGB ê°ë§ˆ ë³´ì •)
function brighten(hex, gain=1.15){
  const {r,g,b} = hexToRgb(hex);
  const toLin = c => Math.pow(c/255, 2.2);
  const toSrgb = c => Math.pow(c, 1/2.2)*255;
  let rl = toLin(r), gl = toLin(g), bl = toLin(b);
  rl = clamp(rl*gain,0,1); gl = clamp(gl*gain,0,1); bl = clamp(bl*gain,0,1);
  return rgbToHex(toSrgb(rl), toSrgb(gl), toSrgb(bl));
}

// ===== ì—˜ë¦¬ë¨¼íŠ¸ =====
const fileInput=document.getElementById('file');
const drop=document.getElementById('drop');
const preview=document.getElementById('preview');
const asciiPre=document.getElementById('ascii');
const msgBelowEl=document.getElementById('msgBelow');
const canvas=document.getElementById('canvas');
const ctx=canvas.getContext('2d',{willReadFrequently:true});

const widthRange=document.getElementById('width');
const fontsizeRange=document.getElementById('fontsize');
const wVal=document.getElementById('wVal');
const fsVal=document.getElementById('fsVal');

const modeSel=document.getElementById('mode');
const fontColorInp=document.getElementById('fontColor');
const bgColorInp=document.getElementById('bgColor');
const customMsgInp=document.getElementById('customMsg');

const btnRender=document.getElementById('render');
const btnCopy=document.getElementById('copyBtn');
const btnSavePng=document.getElementById('savePng');
const btnShareImage=document.getElementById('shareImage');
const btnClear=document.getElementById('clear');
const btnShareSite=document.getElementById('shareSite');

let img=null;
let latestAsciiText='';
let latestColorGrid=null; // ì»¬ëŸ¬ ëª¨ë“œì¼ ë•Œ ë¬¸ì ìƒ‰ìƒ ì €ì¥
const CHARSET="@%#*+=-:. ";

// ===== íŒŒì¼ ì½ê¸° / ì—…ë¡œë“œ í•¸ë“¤ëŸ¬ =====
function readFile(file){
  if(!file) return;
  const url=URL.createObjectURL(file);
  const image=new Image();
  image.onload=()=>{
    img=image;
    preview.innerHTML=`<img src="${url}" style="max-width:100%;border-radius:8px;border:1px solid #1e293b">`;
    btnRender.disabled=false;
    asciiPre.innerHTML='';
    msgBelowEl.textContent='';
    latestAsciiText=''; latestColorGrid=null;
  };
  image.onerror=()=>alert('ì´ë¯¸ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.');
  image.src=url;
}
drop.addEventListener('click',()=> fileInput.click());
drop.addEventListener('keydown',(e)=>{ if(e.key==='Enter'||e.key===' '){ e.preventDefault(); fileInput.click(); }});
fileInput.addEventListener('change',e=> readFile(e.target.files?.[0]));
['dragenter','dragover'].forEach(ev=> drop.addEventListener(ev,e=>{e.preventDefault(); e.stopPropagation();}));
drop.addEventListener('drop',e=>{e.preventDefault(); e.stopPropagation(); readFile(e.dataTransfer.files?.[0]);});
window.addEventListener('paste',e=>{
  const items=e.clipboardData?.items; if(!items) return;
  for(const it of items){ if(it.type.startsWith('image/')){ readFile(it.getAsFile()); break; } }
});

// ===== UI í‘œì‹œê°’ =====
widthRange.addEventListener('input',()=> wVal.textContent = widthRange.value);
fontsizeRange.addEventListener('input',()=>{ fsVal.textContent = fontsizeRange.value; asciiPre.style.fontSize = fontsizeRange.value+'px'; });
modeSel.addEventListener('change',()=>{ fontColorInp.disabled = (modeSel.value==='color'); if(img) renderASCII(); });
fontColorInp.addEventListener('input',()=>{ if(latestAsciiText) { asciiPre.style.color = fontColorInp.value; msgBelowEl.style.color = fontColorInp.value; } });
bgColorInp.addEventListener('input',()=>{ if(latestAsciiText) asciiPre.style.background = bgColorInp.value; });

// ===== í•µì‹¬ ë Œë”ë§ (ë¯¸ë¦¬ë³´ê¸°) =====
function renderASCII(){
  if(!img) return;
  const targetCols=parseInt(widthRange.value,10);
  const fontSize=parseInt(fontsizeRange.value,10);
  const mode=modeSel.value; // 'mono' | 'color'
  const charAspect=2.0;

  // ë¦¬ì‚¬ì´ì¦ˆ í›„ ìƒ˜í”Œë§
  const scale=targetCols/img.width;
  const targetRows=Math.max(1,Math.round(img.height*scale/charAspect));
  canvas.width=targetCols; canvas.height=targetRows;
  ctx.imageSmoothingEnabled=true; ctx.imageSmoothingQuality='high';
  ctx.drawImage(img,0,0,canvas.width,canvas.height);

  const {data,width,height}=ctx.getImageData(0,0,canvas.width,canvas.height);

  const lines=[]; const colorGrid=[];
  for(let y=0;y<height;y++){
    let line=''; const rowColors=[];
    for(let x=0;x<width;x++){
      const i=(y*width+x)*4;
      const r=data[i], g=data[i+1], b=data[i+2], a=data[i+3];
      const lum=0.2126*r + 0.7152*g + 0.0722*b;
      const t=clamp(lum/255,0,1);
      const idx=Math.round((1-t)*(CHARSET.length-1));
      const ch=CHARSET[idx]||' ';
      line+=ch;
      if(mode==='color'){
        const color=(a<10)? bgColorInp.value : rgbToHex(r,g,b);
        rowColors.push(color);
      }
    }
    lines.push(line);
    if(mode==='color') colorGrid.push(rowColors);
  }

  // === ì›Œí„°ë§ˆí¬: ë§ˆì§€ë§‰ ì¤„ ë§¨ì™¼ìª½ ===
  const domain="textartkorea.com";
  if(lines.length){
    const last=lines[lines.length-1];
    const cols=last.length;
    const replaced = domain + last.slice(domain.length);
    lines[lines.length-1] = replaced;
    if(mode==='color'){
      const rowIdx=lines.length-1;
      for(let c=0;c<Math.min(domain.length, cols); c++){
        colorGrid[rowIdx][c]='#ffffff';
      }
    }
  }else{
    lines.push(domain);
    if(mode==='color') colorGrid.push(domain.split('').map(()=> '#ffffff'));
  }

  // âœ… ì‚¬ìš©ì ë©”ì‹œì§€ëŠ” ë” ì´ìƒ ë§ˆì§€ë§‰ ì¤„ì— ë¼ìš°ì§€ ì•ŠìŒ â€” ì•„ë˜ ë°•ìŠ¤ì— ë³„ë„ í‘œì‹œ
  const userMsg = (customMsgInp.value || '').slice(0,10);

  latestAsciiText=lines.join('\n');
  latestColorGrid=(mode==='color') ? colorGrid : null;

  // í™”ë©´ ì ìš©
  asciiPre.style.fontSize=fontSize+'px';
  asciiPre.style.background=bgColorInp.value;

  if(mode==='mono'){
    asciiPre.style.color=fontColorInp.value;
    asciiPre.textContent=latestAsciiText;
    msgBelowEl.style.color = fontColorInp.value;
  }else{
    const rowsHtml=[];
    for(let y=0;y<lines.length;y++){
      const chars=lines[y]; const colors=colorGrid[y];
      let html='';
      for(let x=0;x<chars.length;x++){
        const ch=chars[x];
        html += `<span style="color:${colors[x]}">${ch===' ' ? '&nbsp;' : ch}</span>`;
      }
      rowsHtml.push(html);
    }
    asciiPre.innerHTML=rowsHtml.join('<br>');
    msgBelowEl.style.color = '#ffffff';
  }

  // âœ… ë©”ì‹œì§€ë¥¼ ì•„ë˜ ë°•ìŠ¤ì— ìš°ì¸¡ ì •ë ¬ë¡œ í‘œì‹œ
  msgBelowEl.textContent = userMsg || '';

  btnCopy.disabled=false;
  btnSavePng.disabled=false;
  btnShareImage.disabled=false;
}

// ===== PNG ë¹Œë“œ(ì €ì¥/ê³µìœ  ê³µìš©) â€” ë” ë°ê²Œ + ë‘ê»ê²Œ + ë©”ì‹œì§€ ì•„ë˜ ìš°ì¸¡ ì •ë ¬ =====
async function buildImageBlob(){
  if(!latestAsciiText) return null;

  const mode        = modeSel.value;
  const baseFont    = parseInt(fontsizeRange.value, 10);
  const fontColor   = fontColorInp.value;
  const bgColor     = bgColorInp.value;
  const userMsg     = (customMsgInp.value || '').slice(0,10);

  // ì €ì¥/ê³µìœ  ì „ìš© ê³ í•´ìƒë„ ë°°ìœ¨
  const SCALE_FACTOR = 2;

  const tmp  = document.createElement('canvas');
  const tctx = tmp.getContext('2d');
  const fontFamily = 'ui-monospace, SFMono-Regular, Menlo, Consolas, monospace';

  // êµµê¸° + ë°°ìœ¨ ì ìš©
  const fontSize  = baseFont * SCALE_FACTOR;
  tctx.font       = `700 ${fontSize}px ${fontFamily}`; // ë³¼ë“œë¡œ ë” ë‘ê»ê²Œ
  const charWidth = tctx.measureText('M').width;

  const lines = latestAsciiText.split('\n');
  const cols  = Math.max(...lines.map(l => l.length));
  const rows  = lines.length;
  const pad   = Math.round(fontSize * 0.7);

  // âœ… ë©”ì‹œì§€ ì˜ì—­ ë†’ì´ ì¶”ê°€(ìˆì„ ë•Œë§Œ)
  const msgHeight = userMsg ? Math.ceil(fontSize * 1.3) : 0;

  tmp.width  = Math.ceil(pad + cols * charWidth + pad);
  tmp.height = Math.ceil(pad + rows * fontSize + pad + msgHeight);

  // ë°°ê²½
  tctx.fillStyle = bgColor;
  tctx.fillRect(0, 0, tmp.width, tmp.height);
  tctx.font = `700 ${fontSize}px ${fontFamily}`;
  tctx.textBaseline = 'top';

  if (mode === 'mono') {
    // í‘ë°±: ì‚¬ìš©ìê°€ ê³ ë¥¸ í°íŠ¸ìƒ‰ + ë‘ ë²ˆ ì°ê¸°ë¡œ ë‘ê»˜/ë°ê¸° ì²´ê° ìƒìŠ¹
    tctx.fillStyle = fontColor;
    for (let r = 0; r < rows; r++) {
      const y = pad + r * fontSize;
      tctx.fillText(lines[r], pad, y);
      tctx.fillText(lines[r], pad, y); // ê²¹ì³ ì°ê¸°
    }
  } else {
    // ì»¬ëŸ¬: ì €ì¥ì‹œì—ë§Œ ì»¬ëŸ¬ ë°ê¸° ë³´ì • + ë‘ ë²ˆ ì°ê¸°
    for (let r = 0; r < rows; r++) {
      const chars  = lines[r];
      const colors = latestColorGrid[r];
      let x = pad;
      const y = pad + r * fontSize;
      for (let c = 0; c < chars.length; c++) {
        const bcol = brighten(colors[c], 1.15); // ì¡°ê¸ˆ ë” ë°ê²Œ
        tctx.fillStyle = bcol;
        tctx.fillText(chars[c], x, y);
        tctx.fillText(chars[c], x, y); // ê²¹ì³ ì°ê¸°ë¡œ ë‘ê»˜ê°
        x += charWidth;
      }
    }
  }

  // âœ… ë©”ì‹œì§€ë¥¼ ë§ˆì§€ë§‰ ì¤„ 'ì•„ë˜' ìš°ì¸¡ ì •ë ¬ë¡œ ê·¸ë¦¬ê¸° (ìˆì„ ë•Œë§Œ)
  if (userMsg) {
    tctx.fillStyle = (mode === 'mono') ? fontColor : '#ffffff';
    const msgWidth = tctx.measureText(userMsg).width;
    const x = Math.max(pad, tmp.width - pad - msgWidth); // ì˜¤ë¥¸ìª½ ì •ë ¬
    const y = pad + rows * fontSize + Math.round(fontSize * 0.2); // ë³¸ë¬¸ ì•„ë˜ ì•½ê°„ ì—¬ë°±
    tctx.fillText(userMsg, x, y);
    tctx.fillText(userMsg, x, y); // ë‘ê»˜ê°
  }

  return await new Promise(res => tmp.toBlob(res, 'image/png'));
}

// ===== ë²„íŠ¼ =====
btnRender.addEventListener('click',renderASCII);

btnCopy.addEventListener('click',async()=>{
  try{ await navigator.clipboard.writeText(latestAsciiText); alert('ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!'); }
  catch(e){ alert('ë³µì‚¬ ì‹¤íŒ¨. ë¸Œë¼ìš°ì € ê¶Œí•œì„ í™•ì¸í•˜ì„¸ìš”.'); }
});

btnSavePng.addEventListener('click',async()=>{
  const blob=await buildImageBlob();
  if(!blob){ alert('ë¨¼ì € ë§Œë“¤ê¸°ë¥¼ ëˆŒëŸ¬ ì¶œë ¥ë¬¼ì„ ìƒì„±í•˜ì„¸ìš”.'); return; }
  const a=document.createElement('a');
  a.href=URL.createObjectURL(blob);
  a.download='text-art.png';
  a.click();
});

btnShareImage.addEventListener('click',async()=>{
  const blob=await buildImageBlob();
  if(!blob){ alert('ë¨¼ì € ë§Œë“¤ê¸°ë¥¼ ëˆŒëŸ¬ ì¶œë ¥ë¬¼ì„ ìƒì„±í•˜ì„¸ìš”.'); return; }
  const file=new File([blob],'text-art.png',{type:'image/png'});
  if(navigator.canShare && navigator.canShare({files:[file]})){
    try{ await navigator.share({files:[file], title:'í…ìŠ¤íŠ¸ ì•„íŠ¸', text:'í…ìŠ¤íŠ¸ ì•„íŠ¸ë¥¼ ê³µìœ í•©ë‹ˆë‹¤.'}); }
    catch(e){ /* ì·¨ì†Œ ê°€ëŠ¥ */ }
  }else{
    const a=document.createElement('a');
    a.href=URL.createObjectURL(blob);
    a.download='text-art.png';
    a.click();
    alert('ì´ ë¸Œë¼ìš°ì €ëŠ” ì´ë¯¸ì§€ ê³µìœ ë¥¼ ì§€ì›í•˜ì§€ ì•Šì•„ ë‹¤ìš´ë¡œë“œë¡œ ëŒ€ì²´í–ˆì–´ìš”. ë‹¤ìš´ë¡œë“œëœ ì´ë¯¸ì§€ë¥¼ ê³µìœ í•´ ì£¼ì„¸ìš”.');
  }
});

// ì‚¬ì´íŠ¸ ê³µìœ 
btnShareSite.addEventListener('click',async()=>{
  const shareData={title:'í…ìŠ¤íŠ¸ ì•„íŠ¸ ìƒì„±ê¸°', text:'ì´ë¯¸ì§€ë¥¼ í…ìŠ¤íŠ¸ ì•„íŠ¸ë¡œ ë³€í™˜í•´ë³´ì„¸ìš”!', url:location.href};
  if(navigator.share){
    try{ await navigator.share(shareData); }catch(e){}
  }else{
    try{ await navigator.clipboard.writeText(location.href); alert('ì‚¬ì´íŠ¸ ì£¼ì†Œê°€ ë³µì‚¬ë˜ì—ˆì–´ìš”!'); }
    catch(e){ alert('ê³µìœ  ë¯¸ì§€ì› ë¸Œë¼ìš°ì €ì…ë‹ˆë‹¤. ì£¼ì†Œë¥¼ ì§ì ‘ ë³µì‚¬í•´ ì£¼ì„¸ìš”: '+location.href); }
  }
});

// ì´ˆê¸°í™”
btnClear.addEventListener('click',()=>{
  img=null; latestAsciiText=''; latestColorGrid=null;
  fileInput.value=''; preview.innerHTML=''; asciiPre.innerHTML=''; msgBelowEl.textContent='';
  btnRender.disabled=true; btnCopy.disabled=true; btnSavePng.disabled=true; btnShareImage.disabled=true;
});

// ì´ë¯¸ì§€ ë¡œë“œ ê°ì§€í•´ì„œ 'ë§Œë“¤ê¸°' í™œì„±í™”
const mo=new MutationObserver(()=>{btnRender.disabled=!img;});
mo.observe(preview,{childList:true});

// ì´ˆê¸° ìƒíƒœ
wVal.textContent=widthRange.value;
fsVal.textContent=fontsizeRange.value;
fontColorInp.disabled = (modeSel.value==='color');
</script>

<footer>
  <p style="text-align:center; color:#666; font-size:14px;">Â© 2025 textartkorea.com</p>

<a href="https://iryan.kr/t73750ushf" target="_blank" rel="noopener noreferrer">
  <img
    src="https://img.tenping.kr/Content/Upload/Content/2025082015510001_Con_20250820160749_3.jpg?RS=720x1280"
    alt="í”„ë¡œëª¨ì…˜ ë°°ë„ˆ"
    style="max-width:100%; height:auto; display:block; border:0; margin:0 auto;"
    loading="lazy"
    decoding="async"
  />
</a>

</footer>
</body>
</html>
