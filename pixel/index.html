<!DOCTYPE html>
<html lang="ko">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-93TFLCBY3F"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);} gtag('js', new Date());
    gtag('config', 'G-93TFLCBY3F');
  </script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9891583086388017" crossorigin="anonymous"></script>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
  <title>í”½ì…€ ì•„íŠ¸ ìƒì„±ê¸° - textartkorea.com</title>

  <!-- favicon -->
  <link rel="icon" type="image/x-icon" href="/favicon.ico">

  <!-- Open Graph -->
  <meta name="description" content="ì´ë¯¸ì§€ë¥¼ ë¡œë¸”ë¡ìŠ¤í’ í”½ì…€ì•„íŠ¸ë¡œ ë§Œë“¤ì–´ë³´ì„¸ìš” (ì»¬ëŸ¬ ì „ìš©)">
  <meta property="og:type" content="website">
  <meta property="og:title" content="í”½ì…€ ì•„íŠ¸ ìƒì„±ê¸° - textartkorea.com">
  <meta property="og:description" content="ì´ë¯¸ì§€ë¥¼ ë¡œë¸”ë¡ìŠ¤í’ í”½ì…€ì•„íŠ¸ë¡œ ë§Œë“¤ì–´ë³´ì„¸ìš” (ì»¬ëŸ¬ ì „ìš©)">
  <meta property="og:site_name" content="textartkorea.com">
  <meta property="og:image" content="https://textartkorea.com/preview.jpg">
  <meta property="og:url" content="https://textartkorea.com/pixel">

  <style>
    /* â–¼ ê¸°ì¡´ UX ìœ ì§€ + 'ì–´ë‘ìš´ ë…¸ë€ìƒ‰' íŒ”ë ˆíŠ¸ */
    :root{
      --bg:#0b0b06;         /* ì•„ì£¼ ì–´ë‘ìš´ ë°¤ìƒ‰ */
      --panel:#17140a;      /* ì§™ì€ ê°ˆí™©ìƒ‰ íŒ¨ë„ */
      --text:#fff9d6;       /* í¬ë¦¼ë¹› í…ìŠ¤íŠ¸ */
      --muted:#c2b98a;      /* íƒí•œ ë…¸ë‘ íšŒìƒ‰*/
      --accent:#e6b400;     /* ì–´ë‘ìš´ ë…¸ë€ í¬ì¸íŠ¸ */
      --accent-2:#b38600;   /* ë”¥ ì˜ë¡œìš° ë²„íŠ¼ ê²½ê³„ */
      --border:#3a3215;     /* í…Œë‘ë¦¬ */
    }
    *{box-sizing:border-box}
    body{margin:0; background:var(--bg); color:var(--text); font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, monospace}
    .wrap{max-width:940px;margin:0 auto;padding:16px}
    header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;gap:8px}
    .title{font-weight:800;font-size:18px}
    .sharebar{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    .panel{background:var(--panel);border:1px solid var(--border);border-radius:14px;padding:14px}
    .grid{display:grid;gap:12px}
    @media(min-width:960px){.grid{grid-template-columns:360px 1fr}}

    /* ì—…ë¡œë“œ ì˜ì—­ */
    .drop{
      border:2px dashed #5a4d1d;border-radius:12px;padding:18px;text-align:center;
      background:#131005cc; cursor:pointer; user-select:none
    }
    .drop:hover{border-color:var(--accent)}
    .drop strong.underline{text-decoration:underline}

    .hint{color:var(--muted);font-size:12px}
    .notice{margin-top:10px;padding:10px;border:1px dashed #5a4d1d;border-radius:10px;background:#131005aa}

    .control{display:flex;flex-direction:column;gap:8px;margin:12px 0;padding:10px;border:1px solid var(--border);border-radius:10px;background:#131005aa}
    .control label{font-size:12px;color:var(--muted)}
    .control select{width:100%}

    .btns{display:flex;flex-wrap:wrap;gap:8px;margin-top:12px}
    button{
      background:linear-gradient(180deg,#b38600,#805f00);
      color:#fff9d6;border:1px solid var(--accent-2);
      padding:11px 14px;border-radius:10px;font-weight:800;cursor:pointer
    }
    button.primary{background:linear-gradient(180deg,#e6b400,#b38600);color:#0b0b06}
    button:disabled{opacity:.55;cursor:not-allowed}
    .iconbtn{display:inline-flex;align-items:center;gap:6px}

    /* ë¯¸ë¦¬ë³´ê¸° ìº”ë²„ìŠ¤ */
    #canvasView{width:100%;height:auto;border-radius:12px;border:1px solid var(--border);background:#000}

    /* íˆ´íŒ/ì‘ì€ í…ìŠ¤íŠ¸ */
    .small{font-size:12px;color:var(--muted)}

    @media(max-width:480px){.control{margin:10px 0; padding:10px} .btns{gap:10px}}
  </style>
</head>
<body>
<div class="wrap">
  <header>
    <div class="title">ğŸŸ¨ í”½ì…€ ì•„íŠ¸ ìƒì„±ê¸°</div>
    <div class="sharebar">
      <button id="shareSite" class="iconbtn">ğŸ“¤ ì¹œêµ¬ì—ê²Œ ê³µìœ </button>
    </div>
  </header>

  <div class="grid">
    <!-- ì¢Œì¸¡: ì»¨íŠ¸ë¡¤ -->
    <div class="panel">
      <!-- ìˆ¨ê¹€ íŒŒì¼ ì…ë ¥ -->
      <input id="file" type="file" accept="image/*" style="display:none">

      <!-- ì—…ë¡œë“œ ì˜ì—­ -->
      <div class="drop" id="drop" role="button" tabindex="0" aria-label="ì´ë¯¸ì§€ë¥¼ ë“œë¡­í•˜ê±°ë‚˜ ì—¬ê¸°ë¥¼ íƒ­í•˜ì—¬ ì—…ë¡œë“œ">
        <div><strong>ì´ë¯¸ì§€ ë“œë¡­</strong>í•˜ê±°ë‚˜ <strong class="underline">ì—¬ê¸°ë¥¼ íƒ­í•˜ì—¬ ì—…ë¡œë“œ</strong></div>
        <div class="hint">í´ë¦½ë³´ë“œ ë¶™ì—¬ë„£ê¸°ë„ ê°€ëŠ¥</div>
      </div>

      <div class="notice">ğŸ’¡ <strong>ì»¬ëŸ¬ ì „ìš©</strong>ì…ë‹ˆë‹¤. í•´ìƒë„ ì˜µì…˜(16/32/64/128) ì¤‘ ì„ íƒ í›„ <b>ë§Œë“¤ê¸°</b>ë¥¼ ëˆ„ë¥´ì„¸ìš”. JPGë¡œ ì €ì¥ë©ë‹ˆë‹¤.</div>

      <div class="control">
        <label for="sizeSel">í•´ìƒë„(íƒ€ì¼ ìˆ˜) â€” ê¸°ë³¸ 32Ã—32</label>
        <select id="sizeSel">
          <option value="16">16 Ã— 16</option>
          <option value="32" selected>32 Ã— 32</option>
          <option value="64">64 Ã— 64</option>
          <option value="128">128 Ã— 128</option>
        </select>
        <div class="small">ì •ì‚¬ê°í˜•ìœ¼ë¡œ ì¤‘ì•™ í¬ë¡­ í›„ í”½ì…€í™”í•´ìš”.</div>
      </div>

      <div class="btns">
        <button id="render" class="primary" disabled>ë§Œë“¤ê¸°</button>
        <button id="saveJpg" disabled>ì´ë¯¸ì§€ ì €ì¥</button>
        <button id="shareImage" disabled>ì´ë¯¸ì§€ ê³µìœ </button>
        <button id="clear">ì´ˆê¸°í™”</button>
      </div>
    </div>

    <!-- ìš°ì¸¡: ë¯¸ë¦¬ë³´ê¸° -->
    <div class="panel">
      <div id="preview" style="margin-bottom:8px"></div>
      <canvas id="canvasView"></canvas>
    </div>
  </div>
</div>

<!-- ë‚´ë¶€ ì²˜ë¦¬ìš© ìº”ë²„ìŠ¤ -->
<canvas id="workA" style="display:none"></canvas>
<canvas id="workB" style="display:none"></canvas>

<script>
// ===== ì—˜ë¦¬ë¨¼íŠ¸ =====
const fileInput = document.getElementById('file');
const drop = document.getElementById('drop');
const preview = document.getElementById('preview');
const canvasView = document.getElementById('canvasView');
const ctxView = canvasView.getContext('2d');
const workA = document.getElementById('workA'); // ì†ŒìŠ¤ í¬ë¡­ìš©
const workB = document.getElementById('workB'); // íƒ€ì¼ ìƒ˜í”Œë§/í™•ëŒ€ìš©
const sizeSel = document.getElementById('sizeSel');
const btnRender = document.getElementById('render');
const btnSaveJpg = document.getElementById('saveJpg');
const btnShareImage = document.getElementById('shareImage');
const btnClear = document.getElementById('clear');
const btnShareSite = document.getElementById('shareSite');

let img = null;
let lastBlob = null; // ìµœì‹  JPG blob

// ===== íŒŒì¼ ì½ê¸° / ì—…ë¡œë“œ í•¸ë“¤ëŸ¬ =====
function readFile(file){
  if(!file) return;
  const url = URL.createObjectURL(file);
  const image = new Image();
  image.onload = () => {
    img = image;
    preview.innerHTML = `<img src="${url}" style="max-width:100%;border-radius:8px;border:1px solid var(--border)">`;
    btnRender.disabled = false; // ë§Œë“¤ê¸° í™œì„±í™”
    // ì´ˆê¸°í™”
    lastBlob = null; canvasView.width = 0; canvasView.height = 0;
    btnSaveJpg.disabled = true; btnShareImage.disabled = true;
  };
  image.onerror = () => alert('ì´ë¯¸ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.');
  image.src = url;
}

// í´ë¦­/í‚¤ë³´ë“œ/ë“œë˜ê·¸/ë¶™ì—¬ë„£ê¸° ì§€ì›
drop.addEventListener('click',()=> fileInput.click());
drop.addEventListener('keydown',(e)=>{ if(e.key==='Enter'||e.key===' '){ e.preventDefault(); fileInput.click(); }});
fileInput.addEventListener('change', e => readFile(e.target.files?.[0]));
['dragenter','dragover'].forEach(ev=> drop.addEventListener(ev, e=>{e.preventDefault(); e.stopPropagation();}));
drop.addEventListener('drop', e=>{ e.preventDefault(); e.stopPropagation(); readFile(e.dataTransfer.files?.[0]); });
window.addEventListener('paste', e=>{
  const items=e.clipboardData?.items; if(!items) return;
  for(const it of items){ if(it.type.startsWith('image/')){ readFile(it.getAsFile()); break; } }
});

// ===== í”½ì…€í™” ë Œë”ë§ =====
function renderPixelArt(){
  if(!img) return;
  const tiles = parseInt(sizeSel.value, 10); // 16|32|64|128

  // 1) ì •ì‚¬ê°í˜• ì¤‘ì•™ í¬ë¡­
  const s = Math.min(img.width, img.height);
  const sx = Math.floor((img.width - s) / 2);
  const sy = Math.floor((img.height - s) / 2);
  workA.width = s; workA.height = s;
  const aCtx = workA.getContext('2d', { willReadFrequently:true });
  aCtx.imageSmoothingEnabled = true; aCtx.imageSmoothingQuality = 'high';
  aCtx.drawImage(img, sx, sy, s, s, 0, 0, s, s);

  // 2) ì¶•ì†Œí•˜ì—¬ íƒ€ì¼ ìƒ‰ ì¶”ì¶œ (tiles x tiles)
  workB.width = tiles; workB.height = tiles;
  const bCtx = workB.getContext('2d', { willReadFrequently:true });
  bCtx.imageSmoothingEnabled = true; bCtx.imageSmoothingQuality = 'high';
  bCtx.drawImage(workA, 0, 0, tiles, tiles);

  // 3) ë³´ê¸°ìš© ìº”ë²„ìŠ¤ì— 'í”½ì…€ í™•ëŒ€' (ìµœê·¼ì ‘ ì´ì›ƒ)
  const CELL = Math.max(4, Math.floor(512/tiles)); // ë°˜ì‘í˜• ê¸°ë³¸ ì…€ í¬ê¸°
  canvasView.width = tiles * CELL; canvasView.height = tiles * CELL;
  ctxView.imageSmoothingEnabled = false; // âœ¨ í”½ì…€ ëŠë‚Œ ìœ ì§€
  ctxView.clearRect(0,0,canvasView.width,canvasView.height);

  // ë¹ ë¥¸ ìŠ¤ì¼€ì¼ ë“œë¡œìš° (ì´ë¯¸ í”½ì…€ ê·¸ë¦¬ë“œ ìƒíƒœ)
  ctxView.drawImage(workB, 0, 0, canvasView.width, canvasView.height);

  // ë§ˆì§€ë§‰ ê²°ê³¼ ë¸”ë¡­ ì´ˆê¸°í™” (ì¬ìƒì„± í•„ìš”)
  lastBlob = null;
  btnSaveJpg.disabled = false;
  btnShareImage.disabled = false;
}

// ===== ê³ í•´ìƒë„ JPG ìƒì„± =====
async function buildJpgBlob(){
  if(!img) return null;
  const tiles = parseInt(sizeSel.value, 10);
  // ì¶œë ¥ í•´ìƒë„ (ì •ì‚¬ê°í˜•). ë„ˆë¬´ í¬ì§€ ì•Šê²Œ 1024 ê¶Œì¥
  const OUT = 1024;

  // 1) ì •ì‚¬ê°í˜• ì¤‘ì•™ í¬ë¡­ â†’ íƒ€ì¼ ìƒ˜í”Œë§
  const s = Math.min(img.width, img.height);
  const sx = Math.floor((img.width - s) / 2);
  const sy = Math.floor((img.height - s) / 2);

  // íƒ€ì¼ ìƒ˜í”Œìš© ìº”ë²„ìŠ¤
  const tileCan = document.createElement('canvas');
  tileCan.width = tiles; tileCan.height = tiles;
  const tctx = tileCan.getContext('2d', { willReadFrequently:true });
  tctx.imageSmoothingEnabled = true; tctx.imageSmoothingQuality = 'high';
  // ìš°ì„  ì •ì‚¬ê°í˜• í¬ë¡­ì„ ì„ì‹œ ìº”ë²„ìŠ¤ì—
  const crop = document.createElement('canvas'); crop.width = s; crop.height = s;
  const cctx = crop.getContext('2d', { willReadFrequently:true });
  cctx.drawImage(img, sx, sy, s, s, 0, 0, s, s);
  // ê·¸ ë‹¤ìŒ tiles x tiles ë¡œ ì¶•ì†Œ
  tctx.drawImage(crop, 0, 0, tiles, tiles);

  // 2) ìµœì¢… ì¶œë ¥ ìº”ë²„ìŠ¤ì— ìµœê·¼ì ‘ ì´ì›ƒìœ¼ë¡œ í™•ëŒ€í•´ì„œ ê·¸ë¦¬ê¸°
  const out = document.createElement('canvas');
  out.width = OUT; out.height = OUT;
  const octx = out.getContext('2d');
  octx.imageSmoothingEnabled = false; // ìµœê·¼ì ‘
  octx.fillStyle = '#000'; octx.fillRect(0,0,OUT,OUT);
  octx.drawImage(tileCan, 0, 0, OUT, OUT);

  // 3) JPG ì¶œë ¥ (ì»¬ëŸ¬ë§Œ, í€„ë¦¬í‹° 0.92)
  return await new Promise(res => out.toBlob(res, 'image/jpeg', 0.92));
}

// ===== ë²„íŠ¼ ë™ì‘ =====
btnRender.addEventListener('click', renderPixelArt);

btnSaveJpg.addEventListener('click', async () => {
  if(!lastBlob) lastBlob = await buildJpgBlob();
  if(!lastBlob){ alert('ë¨¼ì € ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•˜ê³  ë§Œë“¤ê¸°ë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”.'); return; }
  const a = document.createElement('a');
  a.href = URL.createObjectURL(lastBlob);
  a.download = 'pixel-art.jpg';
  a.click();
});

btnShareImage.addEventListener('click', async () => {
  if(!lastBlob) lastBlob = await buildJpgBlob();
  if(!lastBlob){ alert('ë¨¼ì € ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•˜ê³  ë§Œë“¤ê¸°ë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”.'); return; }
  const file = new File([lastBlob], 'pixel-art.jpg', { type:'image/jpeg' });
  if(navigator.canShare && navigator.canShare({ files:[file] })){
    try{ await navigator.share({ files:[file], title:'í”½ì…€ ì•„íŠ¸', text:'í”½ì…€ ì•„íŠ¸ë¥¼ ê³µìœ í•©ë‹ˆë‹¤.' }); }
    catch(e){ /* ì‚¬ìš©ìê°€ ì·¨ì†Œí•  ìˆ˜ ìˆìŒ */ }
  }else{
    const a=document.createElement('a'); a.href=URL.createObjectURL(lastBlob); a.download='pixel-art.jpg'; a.click();
    alert('ì´ ë¸Œë¼ìš°ì €ëŠ” ì´ë¯¸ì§€ ê³µìœ ë¥¼ ì§€ì›í•˜ì§€ ì•Šì•„ ë‹¤ìš´ë¡œë“œë¡œ ëŒ€ì²´í–ˆì–´ìš”. ë‹¤ìš´ë¡œë“œëœ ì´ë¯¸ì§€ë¥¼ ê³µìœ í•´ ì£¼ì„¸ìš”.');
  }
});

btnClear.addEventListener('click', () => {
  img = null; lastBlob = null;
  fileInput.value=''; preview.innerHTML='';
  canvasView.width = 0; canvasView.height = 0;
  btnRender.disabled = true; btnSaveJpg.disabled = true; btnShareImage.disabled = true;
});

// ì‚¬ì´íŠ¸ ê³µìœ 
btnShareSite.addEventListener('click', async () => {
  const shareData = { title:'í”½ì…€ ì•„íŠ¸ ìƒì„±ê¸°', text:'ì´ë¯¸ì§€ë¥¼ ë¡œë¸”ë¡ìŠ¤í’ í”½ì…€ì•„íŠ¸ë¡œ ë³€í™˜í•´ë³´ì„¸ìš”!', url: location.href };
  if(navigator.share){ try{ await navigator.share(shareData); }catch(e){} }
  else{
    try{ await navigator.clipboard.writeText(location.href); alert('ì‚¬ì´íŠ¸ ì£¼ì†Œê°€ ë³µì‚¬ë˜ì—ˆì–´ìš”!'); }
    catch(e){ alert('ê³µìœ  ë¯¸ì§€ì› ë¸Œë¼ìš°ì €ì…ë‹ˆë‹¤. ì£¼ì†Œë¥¼ ì§ì ‘ ë³µì‚¬í•´ ì£¼ì„¸ìš”: '+location.href); }
  }
});

// ì´ë¯¸ì§€ ì„ íƒ ê°ì§€ë¡œ ë§Œë“¤ê¸° í™œì„±í™”
const mo = new MutationObserver(()=>{ btnRender.disabled = !img; });
mo.observe(preview,{ childList:true });
</script>

<footer>
  <p style="text-align:center; color:#9c915f; font-size:14px;">Â© 2025 textartkorea.com</p>
  <div style="max-width:600px; margin:20px auto; text-align:center;">
    <a href="https://iryan.kr/t7372qyi9v" target="_blank" rel="noopener">
      <img src="https://img.tenping.kr/Content/Upload/Content/2025080810130001_Con_20250811102256_5.jpg?RS=1200x1200" alt="ê´‘ê³  ë°°ë„ˆ" style="width:100%; height:auto; border-radius:8px;">
    </a>
  </div>
</footer>
</body>
</html>
